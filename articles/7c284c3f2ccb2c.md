---
title: "Playwright Agentsã‚’ä½¿ã£ãŸãƒ†ã‚¹ãƒˆè¨ˆç”»ãƒ»ã‚³ãƒ¼ãƒ‰ãƒ»è‡ªå‹•ä¿®å¾©ã®ã‚µã‚¤ã‚¯ãƒ«æ¤œè¨¼"
emoji: "ğŸ§ª"
type: "tech" # tech: æŠ€è¡“è¨˜äº‹ / idea: ã‚¢ã‚¤ãƒ‡ã‚¢
topics: ["playwright", "ãƒ†ã‚¹ãƒˆè‡ªå‹•åŒ–", "MCP"]
published: true
published_at: 2025-11-26 18:00
---

# ã¯ã˜ã‚ã«

Playwrightå…¬å¼ãŒã€ãƒ†ã‚¹ãƒˆã®è¨ˆç”»ãƒ»å®Ÿè£…ãƒ»ä¿®æ­£ã‚’è¡Œã†ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆã‚’æä¾›ã—å§‹ã‚ãŸã‚ˆã†ãªã®ã§è©¦ã—ã¦ã¿ã‚‹ã€‚
https://playwright.dev/docs/test-agents

# Playwright Agentsã‚’ä½¿ã£ã¦ã¿ã‚‹
## ç’°å¢ƒ
- Windows11ä¸Šã®WSL2 (Ubuntu)

## äº‹å‰æº–å‚™

### Playwrightã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«
```bash
npm init playwright@latest
```
https://playwright.dev/docs/intro

## æ‰‹é †

### 1. `Playwright Agent`ã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«
```bash
npx playwright init-agents --loop=vscode
```

ã‚³ãƒãƒ³ãƒ‰ã‚’å®Ÿè¡Œã—ãŸãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã«ã€ã„ãã¤ã‹ãƒ•ã‚¡ã‚¤ãƒ«ãŒç”Ÿæˆã•ã‚Œã¦ã„ã‚‹
```
Need to install the following packages:
playwright@1.56.1
Ok to proceed? (y) y

Writing file: .github/chatmodes/ğŸ­ generator.chatmode.md
Writing file: .github/chatmodes/ğŸ­ healer.chatmode.md
Writing file: .github/chatmodes/ ğŸ­ planner.chatmode.md
Writing file: .vscode/mcp.json
Writing file: seed.spec.ts
```

:::message
ç§ã®ç’°å¢ƒã ã¨ã€`mcp.json`ã«`--headless`ã‚ªãƒ—ã‚·ãƒ§ãƒ³ã‚’åŠ ãˆãªã„ã¨MCPã‚µãƒ¼ãƒå´ã§ã‚¨ãƒ©ãƒ¼ãŒç™ºç”Ÿã—ã¾ã—ãŸã€‚
:::

### 2. `VSCode Insiders`ã‚’èµ·å‹•
:::message
VSCodeã®æ­£å¼ç‰ˆã«ã¯å«ã¾ã‚Œã¦ãªã„å®Ÿé¨“çš„æ©Ÿèƒ½ã‚’ä½¿ã£ã¦ã„ã‚‹ã‚‰ã—ã„ã®ã§ã€
VSCode Insidersã§å‹•ã‹ã—ãŸæ–¹ãŒç„¡é›£ã‹ã‚‚ï¼ˆãã®ã†ã¡æ­£å¼ç‰ˆã§å•é¡Œãªããªã‚‹ï¼Ÿï¼‰
:::

Copilotã®Chatãƒšã‚¤ãƒ³ã«ã€ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆãŒå¢—ãˆã¦ã„ã‚‹ã€‚
![chat-pain](/images/playwright-test-poc/chat-pain.png)

### 3. ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆã«ãƒ†ã‚¹ãƒˆè¨ˆç”»ã—ã¦ã‚‚ã‚‰ã†
ãƒ­ãƒ¼ã‚«ãƒ«ã«é©å½“ãªã‚¢ãƒ—ãƒªã‚’ç«‹ã¡ä¸Šã’ãŸä¸Šã§ã€`planner`ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆã«ä»¥ä¸‹ã‚’æŒ‡ç¤ºã€‚
![planner-instruct](/images/playwright-test-poc/planner-instruct.png)

ä»•æ§˜æ›¸ã‚’ç”Ÿæˆã—ã¦ãã‚ŒãŸã€‚
![planner-gen1-1](/images/playwright-test-poc/planner-gen1-1.png)
![planner-gen1-2](/images/playwright-test-poc/planner-gen1-2.png)

åŒã˜ã‚³ãƒ³ãƒ†ã‚­ã‚¹ãƒˆã§ã€ãƒ†ã‚¹ãƒˆè¨ˆç”»æ›¸ä½œæˆã‚‚ãŠé¡˜ã„ã—ã¦ã¿ã‚‹ã€‚
![test-plan-instruct](/images/playwright-test-poc/test-plan-insturct.png)
![test-plan](/images/playwright-test-poc/test-plan.png)

### 4. ãƒ†ã‚¹ãƒˆã®å®Ÿè£…

`generator`ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆã«ãƒ†ã‚¹ãƒˆè¨ˆç”»ã«æ²¿ã£ãŸãƒ†ã‚¹ãƒˆå®Ÿè£…ã‚’æŒ‡ç¤ºã€‚
![test-gen-instruct](/images/playwright-test-poc/test-gen-instruct.png)

ãƒ†ã‚¹ãƒˆã‚³ãƒ¼ãƒ‰ã‚’ã‚‚ã‚Šã‚‚ã‚Šä½œæˆã—ã¦ã„ãã€‚
```ts
// spec: docs/webapp-test-plan.md
// seed: tests/seed.spec.ts
// Scenario: 5.5 ã‚µã‚¤ãƒ³ã‚¢ãƒƒãƒ—ï¼ˆæ­£å¸¸ç³»ï¼‰
import { test, expect } from '@playwright/test';

test.describe('ã‚·ãƒŠãƒªã‚ª 5.5 ã‚µã‚¤ãƒ³ã‚¢ãƒƒãƒ—ï¼ˆæ­£å¸¸ç³»ï¼‰', () => {
  test('5.5 ã‚µã‚¤ãƒ³ã‚¢ãƒƒãƒ—ï¼ˆæ­£å¸¸ç³»ï¼‰', async ({ page }) => {
    // 1. /register ã‚’é–‹ã
    await page.goto('http://localhost:4200/register');

    // 2. Username/Email/Password ã‚’æœ‰åŠ¹å€¤ã§å…¥åŠ›
    const username = `e2e_signup_${Date.now()}`;
    const email = `${username}@example.com`;
    await page.getByRole('textbox', { name: 'Username' }).fill(username);
    await page.getByRole('textbox', { name: 'Email' }).fill(email);
    await page.getByRole('textbox', { name: 'Password' }).fill('Passw0rd!');

    // 3. Sign up ã‚’ã‚¯ãƒªãƒƒã‚¯
    await page.getByRole('button', { name: 'Sign up' }).click();

    // æœŸå¾…çµæœ: Home ã«é·ç§»ã€ãƒ˜ãƒƒãƒ€ãŒãƒ­ã‚°ã‚¤ãƒ³çŠ¶æ…‹ã«å¤‰åŒ–
    await expect(page.getByRole('link', { name: 'New Article' })).toBeVisible();
    await expect(page.getByRole('link', { name: 'Settings' })).toBeVisible();
    await expect(page.getByRole('link', { name: username })).toBeVisible();

    // æœŸå¾…çµæœ: LocalStorage ã« JWT ä¿å­˜
    const token = await page.evaluate(() => window.localStorage.getItem('jwtToken'));
    expect(token, 'jwtToken should be set in localStorage').toBeTruthy();
  });
});
```

![images/playwright-test-poc/fail-result](/images/playwright-test-poc/fail-result.png)
- ãŸãã•ã‚“å¤±æ•—ã—ã¦ã„ã‚‹

### ãƒ†ã‚¹ãƒˆã®ä¿®æ­£
ãƒ’ãƒ¼ãƒ©ãƒ¼ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆã«ä¿®æ­£ã‚’ãŠé¡˜ã„ã—ã¦ã¿ã‚‹ã€‚
![healer-agent](/images/playwright-test-poc/healer-agent.png)

- ä½•å›ã‹ã‚„ã‚Šã¨ã‚Šã—ãŸã‚‰ã™ã¹ã¦Passedã«ãªã£ãŸ

# ãŠã‚ã‚Šã«
- é›‘ã«ä½¿ã£ãŸã‘ã©ã€çµæ§‹ä½¿ã„ã‚„ã™ã‹ã£ãŸ
- ãƒ†ã‚¹ãƒˆè‡ªå‹•åŒ–ã®ã¨ã£ã‹ã‹ã‚Šã¨ã—ã¦ã¯è‰¯ã„ã‹ã‚‚
- MCPæ´»ç”¨ã—ã¦ã‚‚ã£ã¨é–‹ç™ºåŠ¹ç‡ä¸Šã’ã¦ã„ããŸã„ã€‚
- ãƒ†ã‚¹ãƒˆã‚±ãƒ¼ã‚¹ã¨ã—ã¦ä¾¡å€¤ãŒã‚ã‚‹ã®ã‹ã€å®Ÿè£…ã¯å¦¥å½“ã‹ãªã©ãƒã‚§ãƒƒã‚¯ã¯ã„ã‚‹
  - ãã‚Œè‡ªä½“ã‚‚ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆã«ã„ã‚Œã‚‹ã¹ã


# è£œè¶³ï¼šPlaywright Agentsã®å®Ÿè£…èª¿æŸ»
- `mcp.json`è¨˜è¼‰ã®`run-test-mcp-server`ã‚³ãƒãƒ³ãƒ‰ã®å®Ÿè£…ã¯ä»¥ä¸‹
   - https://github.com/microsoft/playwright/blob/3afe7ba8c020e1f69c703dce1801d258bd726f89/packages/playwright/src/program.ts#L157